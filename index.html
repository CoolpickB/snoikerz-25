<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="public\favicon.ico">
  <link rel="stylesheet" href="reset.css" />
  <link href='https://fonts.googleapis.com/css?family=Kreon' rel='stylesheet'>
  <title>Snoikerz 25</title>
</head>
<body class="main">
  <div class="front">
    <div style="font-size: 4rem;">Time until the Snoikerz 2025 Minecraft server <span class="explode">EXPLODES</span></div>
    <p id="timer" style="color: #ac4147; font-size: 5rem;"></p>
<div style="font-size: 3rem;">
  <span id="status"></span>: 
  <span id="currentlyOnline"></span> 
  [<span style="color: #ac4147" id="speed"></span>] 
  <span id="dropdown">
    <img id="caret" src="public/caret.svg" alt="caret" style="rotate: 180deg; height: 3rem; vertical-align: middle; display:inline-flex; transition: transform 0.2s ease;">
    <div id="dropdownContent" style="font-size: 2rem; border: 1px #ac4147 solid; border-radius: 5px; padding: 10px">Updates every minute or so</div>
  </span>
</div>


</div>
  </div>
</body>
</html>

<style>
.main{
  background-color: #15090a;
  height: 100vh;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
.front{
  max-width: 50%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-family: 'Kreon';
  color: #e4b6b9;
  gap: 50px;
  text-align: center;
}
#dropdownContent{
  display:none;
  position: absolute;
  left: 50%;
  margin-top: 30px;
  transform: translate( -50%);
}
#caret{
  cursor:pointer;
  rotate: 0deg;
}
</style>

<!-- Dropdown -->
<script>
const dropdown = document.getElementById('dropdown');
const dropdownContent = document.getElementById('dropdownContent');
const caret = document.getElementById('caret');

let open = false;

dropdown.addEventListener('click', () => {
  open = !open;
  dropdownContent.style.display = open ? 'flex' : 'none';
  caret.style.transform = open ? 'rotate(180deg)' : 'rotate(0deg)';
});

</script>

<!-- Player Counter-->
<script>
  let playerCount = 0;
  let speedMultiplier = 1;
  let serverOnline = true;

  async function getPlayerCount() {
    try {
      const response = await fetch('https://api.mcstatus.io/v2/status/java/15.235.36.16:25589');

      if (!response.ok) throw new Error("Bad response");

      const data = await response.json();

      // Check if server is offline or data is missing
      if (!data.online || data.players == null) {
        throw new Error("Server reported as offline");
      }

      // Server is online
      serverOnline = true;
      playerCount = data.players.online;
      const maxPlayers = data.players.max;
      speedMultiplier = 1 - 0.5 * playerCount;

      document.getElementById('currentlyOnline').textContent =
        `${playerCount} / ${maxPlayers}`;
      document.getElementById('speed').textContent = `${speedMultiplier}x`;
      document.getElementById('status').textContent = "üü¢ Online";

    } catch (err) {
      // Server is offline or request failed
      serverOnline = false;
      speedMultiplier = 0; // ‚è∏ Pause timer
      document.getElementById('currentlyOnline').textContent = `0 / 0 players online`;
      document.getElementById('speed').textContent = `0x`;
      document.getElementById('status').textContent = "üî¥ Offline";
      console.error("Server unreachable:", err.message);
    }
  }

  getPlayerCount();
  setInterval(getPlayerCount, 10000);
</script>

<!-- Explode -->
<audio src="public\explode.mp3" id="sound" preload="auto"></audio>
<script>
  const box = document.querySelectorAll(".explode");

box.forEach((box) => {
  const el = box;
  el.addEventListener("click", () => {
    const original = document.getElementById(
      "sound",
    );
    if (original) {
      const clone = original.cloneNode(true);
      clone.volume = 0.5;
      clone?.play();
    }
  });
});

</script>

<!-- Timer -->
<script>
// Target date
const countDownDate = new Date("2025-06-09T15:37:25Z").getTime();

// Start with real current time
let virtualNow = new Date().getTime();

// Update timer every 1 second
const x = setInterval(function () {
  // Advance virtual time based on speed
  virtualNow += 1000 * speedMultiplier;

  const distance = countDownDate - virtualNow;
  const absDistance = Math.abs(distance);

  const days = Math.floor(absDistance / (1000 * 60 * 60 * 24));
  const hours = Math.floor((absDistance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  const minutes = Math.floor((absDistance % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((absDistance % (1000 * 60)) / 1000);

  document.getElementById("timer").innerHTML =
  days + "d " + hours + "h " + minutes + "m " + seconds + "s";
}, 1000);
</script>